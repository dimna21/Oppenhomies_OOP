/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2024-07-09 08:25:27 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class CreateQuiz_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("  <meta charset=\"UTF-8\">\r\n");
      out.write("  <title>Create Quiz</title>\r\n");
      out.write("  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n");
      out.write("  <link rel=\"stylesheet\" type=\"text/css\" href=\"CreateQuiz.css?v=2.2\">\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<h1>Create Quiz</h1>\r\n");
      out.write("<form id=\"quizForm\" action=\"CreateQuizServlet\" method=\"post\">\r\n");
      out.write("  <input type=\"text\" id=\"quizTitle\" placeholder=\"Quiz Title\" required><br>\r\n");
      out.write("  <textarea id=\"quizDescription\" placeholder=\"Quiz Description\" required></textarea><br>\r\n");
      out.write("  <div class=\"checkbox-container\">\r\n");
      out.write("    <label>\r\n");
      out.write("      <span>Random Order of Questions</span>\r\n");
      out.write("      <input type=\"checkbox\" id=\"randomCheckbox\" name=\"randomCheckbox\">\r\n");
      out.write("    </label>\r\n");
      out.write("    <label>\r\n");
      out.write("      <span>Display on One Page</span>\r\n");
      out.write("      <input type=\"checkbox\" id=\"onePageCheckbox\" name=\"onePageCheckbox\">\r\n");
      out.write("    </label>\r\n");
      out.write("    <label>\r\n");
      out.write("      <span>Immediate Answers to Questions</span>\r\n");
      out.write("      <input type=\"checkbox\" id=\"immediateCheckbox\" name=\"immediateCheckbox\">\r\n");
      out.write("    </label>\r\n");
      out.write("    <label>\r\n");
      out.write("      <span>Practice Mode</span>\r\n");
      out.write("      <input type=\"checkbox\" id=\"practiceCheckbox\" name=\"practiceCheckbox\">\r\n");
      out.write("    </label>\r\n");
      out.write("  </div>\r\n");
      out.write("  <div id=\"questions\"></div>\r\n");
      out.write("\r\n");
      out.write("  <button type=\"button\" id=\"addQuestionBtn\">Add Question</button>\r\n");
      out.write("\r\n");
      out.write("  <div id=\"questionContainer\" style=\"display:none;\">\r\n");
      out.write("    <select id=\"questionType\">\r\n");
      out.write("      <option value=\"\">Select Question Type</option>\r\n");
      out.write("      <option value=\"questionResponse\">Question Response</option>\r\n");
      out.write("      <option value=\"fillBlank\">Fill in the Blank</option>\r\n");
      out.write("      <option value=\"multipleChoice\">Multiple Choice</option>\r\n");
      out.write("      <option value=\"pictureResponse\">Picture Response</option>\r\n");
      out.write("      <option value=\"multiAnswer\">Multi-Answer Questions</option>\r\n");
      out.write("      <option value=\"multiChoiceMultiAnswer\">Multiple Choice-Multiple Answers</option>\r\n");
      out.write("      <option value=\"matching\">Matching Question</option>\r\n");
      out.write("    </select>\r\n");
      out.write("  </div>\r\n");
      out.write("\r\n");
      out.write("  <button type=\"submit\" id=\"createQuizBtn\" style=\"display:none;\">Create Quiz</button>\r\n");
      out.write("</form>\r\n");
      out.write("\r\n");
      out.write("<script>\r\n");
      out.write("  $(document).ready(function() {\r\n");
      out.write("    let questionId = 0;\r\n");
      out.write("    let questionCount = 0;\r\n");
      out.write("\r\n");
      out.write("    $('#addQuestionBtn').click(function() {\r\n");
      out.write("      $('#questionContainer').toggle();\r\n");
      out.write("      $('#questionType').val(''); // Reset selection\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    $('#questionType').change(function() {\r\n");
      out.write("      let type = $(this).val();\r\n");
      out.write("      if (type === 'questionResponse') {\r\n");
      out.write("        addQuestionResponseQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if (type === 'fillBlank') {\r\n");
      out.write("        addFillBlankQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if (type === 'multipleChoice') {\r\n");
      out.write("        addMultipleChoiceQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if (type === 'pictureResponse') {\r\n");
      out.write("        addPictureResponseQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if(type == 'multiAnswer') {\r\n");
      out.write("        addMultiAnswerQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if(type == 'multiChoiceMultiAnswer') {\r\n");
      out.write("        addMultiChoiceMultiAnswerQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      if(type == 'matching') {\r\n");
      out.write("        addMatchingQuestion();\r\n");
      out.write("      }\r\n");
      out.write("      $('#questionContainer').hide();\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    $('#onePageCheckbox').change(function() {\r\n");
      out.write("      if ($(this).is(':checked')) {\r\n");
      out.write("        $('#immediateCheckbox').prop('checked', false);\r\n");
      out.write("        //$('#immediateCheckbox').prop('disabled', true);\r\n");
      out.write("      }\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    $('#immediateCheckbox').change(function (){\r\n");
      out.write("      if($(this).is(':checked')) {\r\n");
      out.write("        $('#onePageCheckbox').prop('checked',false);\r\n");
      out.write("      }\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    function showCreateQuizButton() {\r\n");
      out.write("      if (questionCount > 0) {\r\n");
      out.write("        $('#createQuizBtn').show();\r\n");
      out.write("      }\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function afterAddingQuestion() {\r\n");
      out.write("      questionCount++;\r\n");
      out.write("      showCreateQuizButton();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addQuestionResponseQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("        <div class=\"question\" id=\"question${questionId}\" data-type=\"questionResponse\">\r\n");
      out.write("          <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("          <div class=\"answers\">\r\n");
      out.write("            <input type=\"text\" placeholder=\"Answer\" required>\r\n");
      out.write("          </div>\r\n");
      out.write("          <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("          <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("          <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addFillBlankQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("        <div class=\"question\" id=\"question${questionId}\" data-type=\"fillBlank\">\r\n");
      out.write("          <input type=\"text\" placeholder=\"Before\">\r\n");
      out.write("          <div class=\"answers\">\r\n");
      out.write("            <input type=\"text\" placeholder=\"Answer\" required>\r\n");
      out.write("          </div>\r\n");
      out.write("          <input type=\"text\" placeholder=\"After\">\r\n");
      out.write("          <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("          <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("          <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addMultipleChoiceQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("        <div class=\"question\" id=\"question${questionId}\" data-type=\"multipleChoice\">\r\n");
      out.write("          <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("          <select class=\"answerCount\">\r\n");
      out.write("            <option value=\"2\">2 Answers</option>\r\n");
      out.write("            <option value=\"3\">3 Answers</option>\r\n");
      out.write("            <option value=\"4\">4 Answers</option>\r\n");
      out.write("            <option value=\"5\">5 Answers</option>\r\n");
      out.write("            <option value=\"6\">6 Answers</option>\r\n");
      out.write("          </select>\r\n");
      out.write("          <div class=\"answers\"></div>\r\n");
      out.write("          <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("          <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("          <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      $(`#question${questionId} .answerCount`).change(function() {\r\n");
      out.write("        let answerCount = $(this).val();\r\n");
      out.write("        let answersHtml = '';\r\n");
      out.write("        for (let i = 0; i < answerCount; i++) {\r\n");
      out.write("          answersHtml += `\r\n");
      out.write("            <div>\r\n");
      out.write("              <input type=\"text\" placeholder=\"Answer ${i + 1}\" required>\r\n");
      out.write("              <input type=\"radio\" name=\"correct${questionId}\" value=\"${i}\"> Correct\r\n");
      out.write("            </div>\r\n");
      out.write("          `;\r\n");
      out.write("        }\r\n");
      out.write("        $(`#question${questionId} .answers`).html(answersHtml);\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addPictureResponseQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("        <div class=\"question\" id=\"question${questionId}\" data-type=\"pictureResponse\">\r\n");
      out.write("          <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("          <input type=\"text\" placeholder=\"Image URL\" required>\r\n");
      out.write("          <div class=\"answers\">\r\n");
      out.write("            <input type=\"text\" placeholder=\"Answer\" required>\r\n");
      out.write("          </div>\r\n");
      out.write("          <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("          <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("          <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addMultiAnswerQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("    <div class=\"question\" id=\"question${questionId}\" data-type=\"multiAnswer\">\r\n");
      out.write("      <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("      <input class=\"answerCount\" type=\"number\" min=\"2\" placeholder=\"Number of answers\" required>\r\n");
      out.write("      <div class=\"answers\"></div>\r\n");
      out.write("      <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("      <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("      <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("    </div>\r\n");
      out.write("  `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      $(`#question${questionId} .answerCount`).change(function() {\r\n");
      out.write("        let answerCount = $(this).val();\r\n");
      out.write("        let answersHtml = '';\r\n");
      out.write("        for (let i = 0; i < answerCount; i++) {\r\n");
      out.write("            answersHtml += `\r\n");
      out.write("                <div>\r\n");
      out.write("                  <input type=\"text\" placeholder=\"Answer ${i + 1}\" required>\r\n");
      out.write("                </div>\r\n");
      out.write("              `;\r\n");
      out.write("          }\r\n");
      out.write("        $(`#question${questionId} .answers`).html(answersHtml);\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addMultiChoiceMultiAnswerQuestion() {\r\n");
      out.write("      questionId++;\r\n");
      out.write("      let questionHtml = `\r\n");
      out.write("        <div class=\"question\" id=\"question${questionId}\" data-type=\"multiChoiceMultiAnswer\">\r\n");
      out.write("          <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("          <select class=\"answerCount\">\r\n");
      out.write("            <option value=\"2\">2 Answers</option>\r\n");
      out.write("            <option value=\"3\">3 Answers</option>\r\n");
      out.write("            <option value=\"4\">4 Answers</option>\r\n");
      out.write("            <option value=\"5\">5 Answers</option>\r\n");
      out.write("            <option value=\"6\">6 Answers</option>\r\n");
      out.write("          </select>\r\n");
      out.write("          <div class=\"answers\"></div>\r\n");
      out.write("          <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("          <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("          <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      `;\r\n");
      out.write("      $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("      $(`#question${questionId} .answerCount`).change(function() {\r\n");
      out.write("        let answerCount = $(this).val();\r\n");
      out.write("        let answersHtml = '';\r\n");
      out.write("        for (let i = 0; i < answerCount; i++) {\r\n");
      out.write("          answersHtml += `\r\n");
      out.write("            <div>\r\n");
      out.write("              <input type=\"text\" placeholder=\"Answer ${i + 1}\" required>\r\n");
      out.write("              <input type=\"checkbox\" name=\"correct${questionId}\" value=\"${i}\"> Correct\r\n");
      out.write("            </div>\r\n");
      out.write("          `;\r\n");
      out.write("        }\r\n");
      out.write("        $(`#question${questionId} .answers`).html(answersHtml);\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("      afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addMatchingQuestion() {\r\n");
      out.write("        questionId++;\r\n");
      out.write("        let questionHtml = `\r\n");
      out.write("          <div class=\"question\" id=\"question${questionId}\" data-type=\"matching\">\r\n");
      out.write("              <input type=\"text\" placeholder=\"Question\" required>\r\n");
      out.write("              <input class=\"answerCount\" type=\"number\" min=\"2\" placeholder=\"Number of answers\" required>\r\n");
      out.write("              <div class=\"answers\"></div>\r\n");
      out.write("              <button type=\"button\" class=\"saveBtn\">Save</button>\r\n");
      out.write("              <button type=\"button\" class=\"editBtn\" style=\"display:none;\">Edit</button>\r\n");
      out.write("              <button type=\"button\" class=\"deleteBtn\">Delete</button>\r\n");
      out.write("          </div>\r\n");
      out.write("        `;\r\n");
      out.write("        $('#questions').append(questionHtml);\r\n");
      out.write("\r\n");
      out.write("        $(`#question${questionId} .answerCount`).change(function() {\r\n");
      out.write("          let answerCount = $(this).val();\r\n");
      out.write("          let answersHtml = '';\r\n");
      out.write("          for (let i = 0; i < answerCount; i++) {\r\n");
      out.write("            answersHtml += `\r\n");
      out.write("                  <div>\r\n");
      out.write("                    <input type=\"text\" placeholder=\"Match ${i + 1}-a\" required>\r\n");
      out.write("                    <input type=\"text\" placeholder=\"Match ${i + 1}-b\" required>\r\n");
      out.write("                  </div>\r\n");
      out.write("                `;\r\n");
      out.write("          }\r\n");
      out.write("          $(`#question${questionId} .answers`).html(answersHtml);\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        setupQuestionButtons(questionId);\r\n");
      out.write("\r\n");
      out.write("        afterAddingQuestion();\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function serializeQuiz() {\r\n");
      out.write("      let quiz = {\r\n");
      out.write("        title: $('#quizTitle').val(),\r\n");
      out.write("        description: $('#quizDescription').val(),\r\n");
      out.write("        randomOrder: $('#randomCheckbox').is(':checked'),\r\n");
      out.write("        onePage: $('#onePageCheckbox').is(':checked'),\r\n");
      out.write("        immediateCorrection: $('#immediateCheckbox').is(':checked'),\r\n");
      out.write("        practice: $('#practiceCheckbox').is(':checked'),\r\n");
      out.write("        questions: []\r\n");
      out.write("      };\r\n");
      out.write("\r\n");
      out.write("      $('.question').each(function() {\r\n");
      out.write("        let $question = $(this);\r\n");
      out.write("        let type = $question.data('type');\r\n");
      out.write("        let questionData = { type: type };\r\n");
      out.write("\r\n");
      out.write("        switch(type) {\r\n");
      out.write("          case 'questionResponse':\r\n");
      out.write("          case 'multipleChoice':\r\n");
      out.write("          case 'pictureResponse':\r\n");
      out.write("          case 'multiAnswer':\r\n");
      out.write("          case 'multiChoiceMultiAnswer':\r\n");
      out.write("          case 'matching':\r\n");
      out.write("            questionData.question = $question.find('input[placeholder=\"Question\"]').val();\r\n");
      out.write("            break;\r\n");
      out.write("          case 'fillBlank':\r\n");
      out.write("            questionData.before = $question.find('input[placeholder=\"Before\"]').val();\r\n");
      out.write("            questionData.after = $question.find('input[placeholder=\"After\"]').val();\r\n");
      out.write("            break;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        switch(type) {\r\n");
      out.write("          case 'questionResponse':\r\n");
      out.write("          case 'pictureResponse':\r\n");
      out.write("            questionData.answer = $question.find('input[placeholder=\"Answer\"]').val();\r\n");
      out.write("            break;\r\n");
      out.write("          case 'fillBlank':\r\n");
      out.write("            questionData.answer = $question.find('input[placeholder=\"Answer\"]').val();\r\n");
      out.write("            break;\r\n");
      out.write("          case 'multipleChoice':\r\n");
      out.write("            questionData.answers = [];\r\n");
      out.write("            $question.find('.answers input[type=\"text\"]').each(function(index) {\r\n");
      out.write("              questionData.answers.push({\r\n");
      out.write("                text: $(this).val(),\r\n");
      out.write("                isCorrect: $question.find(`input[name=\"correct${$question.attr('id').replace('question', '')}\"][value=\"${index}\"]`).is(':checked')\r\n");
      out.write("              });\r\n");
      out.write("            });\r\n");
      out.write("            break;\r\n");
      out.write("\r\n");
      out.write("          case 'multiAnswer':\r\n");
      out.write("            questionData.answers = [];\r\n");
      out.write("            $question.find('.answers input[type=\"text\"]').each(function() {\r\n");
      out.write("              questionData.answers.push($(this).val());\r\n");
      out.write("            });\r\n");
      out.write("            break;\r\n");
      out.write("\r\n");
      out.write("          case 'multiChoiceMultiAnswer':\r\n");
      out.write("            questionData.answers = [];\r\n");
      out.write("            $question.find('.answers input[type=\"text\"]').each(function(index) {\r\n");
      out.write("              questionData.answers.push({\r\n");
      out.write("                text: $(this).val(),\r\n");
      out.write("                isCorrect: $question.find(`input[name=\"correct${$question.attr('id').replace('question', '')}\"][value=\"${index}\"]`).is(':checked')\r\n");
      out.write("              });\r\n");
      out.write("            });\r\n");
      out.write("            break;\r\n");
      out.write("\r\n");
      out.write("          case 'matching':\r\n");
      out.write("            questionData.pairs = [];\r\n");
      out.write("            $question.find('.answers > div').each(function() {\r\n");
      out.write("              let $inputs = $(this).find('input[type=\"text\"]');\r\n");
      out.write("              questionData.pairs.push({\r\n");
      out.write("                a: $inputs.eq(0).val(),\r\n");
      out.write("                b: $inputs.eq(1).val()\r\n");
      out.write("              });\r\n");
      out.write("            });\r\n");
      out.write("            break;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        if (type === 'pictureResponse') {\r\n");
      out.write("          questionData.image = $question.find('input[placeholder=\"Image URL\"]').val();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        quiz.questions.push(questionData);\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      return quiz;\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    $('#quizForm').submit(function(e) {\r\n");
      out.write("      e.preventDefault();\r\n");
      out.write("      let quizData = serializeQuiz();\r\n");
      out.write("\r\n");
      out.write("      $.ajax({\r\n");
      out.write("        url: 'CreateQuizServlet',\r\n");
      out.write("        type: 'POST',\r\n");
      out.write("        contentType: 'application/json',\r\n");
      out.write("        data: JSON.stringify(quizData),  // This line is changed\r\n");
      out.write("        success: function(response) {\r\n");
      out.write("          alert('Quiz created successfully!');\r\n");
      out.write("          // Optionally, redirect or clear the form\r\n");
      out.write("        },\r\n");
      out.write("        error: function(xhr, status, error) {\r\n");
      out.write("          alert('Error creating quiz: ' + error);\r\n");
      out.write("        }\r\n");
      out.write("      });\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    function setupQuestionButtons(questionId) {\r\n");
      out.write("      $(`#question${questionId} .saveBtn`).click(function() {\r\n");
      out.write("        $(this).closest('.question').find('input, select').prop('disabled', true);\r\n");
      out.write("        $(this).hide();\r\n");
      out.write("        $(this).siblings('.editBtn').show();\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      $(`#question${questionId} .editBtn`).click(function() {\r\n");
      out.write("        $(this).closest('.question').find('input, select').prop('disabled', false);\r\n");
      out.write("        $(this).hide();\r\n");
      out.write("        $(this).siblings('.saveBtn').show();\r\n");
      out.write("      });\r\n");
      out.write("\r\n");
      out.write("      $(`#question${questionId} .deleteBtn`).click(function() {\r\n");
      out.write("        $(this).closest('.question').remove();\r\n");
      out.write("        questionCount--;\r\n");
      out.write("        if (questionCount === 0) {\r\n");
      out.write("          $('#createQuizBtn').hide();\r\n");
      out.write("        }\r\n");
      out.write("      });\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("  });\r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
